<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cadastro de dados - Duty Cycle, λ pico e intensidade</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <header class="app-header">
      <div class="app-header__title">
        <h1>Cadastro de dados do experimento</h1>
        <p>
          Duty Cycle <strong>1–10%</strong>. Preencha <strong>λ de pico (nm)</strong> e
          <strong>intensidade</strong> para LEDs verde, vermelho e azul. <strong>5 tomadas</strong>
          por equipamento; no OSA Visível há <strong>4 espectros por tomada</strong> (combinado RGB
          + canais R, G, B da câmera).
        </p>
      </div>

      <div class="app-header__controls">
        <div class="tabs" role="tablist" aria-label="Equipamento">
          <button id="tab-osa" class="tab" type="button" role="tab" aria-selected="true" aria-controls="panel-osa" data-equipment="osa_visivel">
            OSA Visível
          </button>
          <button id="tab-thorlabs" class="tab" type="button" role="tab" aria-selected="false" aria-controls="panel-thorlabs" data-equipment="thorlabs">
            ThorLabs
          </button>
        </div>

        <div id="osa-sub" class="sub-tabs">
          <span class="sub-tabs__label">Tomada:</span>
          <div class="tabs" role="tablist" aria-label="Tomada OSA">
            <button type="button" class="tab tab--sub" data-tomada="1" aria-label="Tomada 1">1</button>
            <button type="button" class="tab tab--sub" data-tomada="2" aria-label="Tomada 2">2</button>
            <button type="button" class="tab tab--sub" data-tomada="3" aria-label="Tomada 3">3</button>
            <button type="button" class="tab tab--sub" data-tomada="4" aria-label="Tomada 4">4</button>
            <button type="button" class="tab tab--sub" data-tomada="5" aria-label="Tomada 5">5</button>
          </div>
          <span class="sub-tabs__label">Espectro:</span>
          <div class="tabs" role="tablist" aria-label="Espectro OSA">
            <button type="button" class="tab tab--sub" data-espectro="1" aria-label="Combinado RGB">Combinado</button>
            <button type="button" class="tab tab--sub" data-espectro="2" aria-label="Canal R">Canal R</button>
            <button type="button" class="tab tab--sub" data-espectro="3" aria-label="Canal G">Canal G</button>
            <button type="button" class="tab tab--sub" data-espectro="4" aria-label="Canal B">Canal B</button>
          </div>
        </div>

        <div id="thorlabs-sub" class="sub-tabs sub-tabs--hidden">
          <span class="sub-tabs__label">Tomada:</span>
          <div class="tabs" role="tablist" aria-label="Tomada ThorLabs">
            <button type="button" class="tab tab--sub" data-tomada="1" aria-label="Tomada 1">1</button>
            <button type="button" class="tab tab--sub" data-tomada="2" aria-label="Tomada 2">2</button>
            <button type="button" class="tab tab--sub" data-tomada="3" aria-label="Tomada 3">3</button>
            <button type="button" class="tab tab--sub" data-tomada="4" aria-label="Tomada 4">4</button>
            <button type="button" class="tab tab--sub" data-tomada="5" aria-label="Tomada 5">5</button>
          </div>
        </div>

        <div class="actions">
          <span class="paste-quick-wrap u-hidden" aria-hidden="true">
            <label class="checkbox-label">
              <input id="cb-paste-mode" type="checkbox" />
              <span>Habilitar colagem rápida</span>
            </label>
            <button id="btn-paste-clipboard" class="btn" type="button" disabled title="Habilite a colagem rápida e clique aqui após copiar um número">
              Colar da área de transferência
            </button>
          </span>
          <button id="btn-export-csv" class="btn btn--primary" type="button">Exportar CSV (tabela atual)</button>
          <button id="btn-export-json" class="btn" type="button">Exportar JSON (tudo)</button>
          <label class="btn btn--file" for="file-import-json-total">
            Importar JSON (substituir tudo)
            <input id="file-import-json-total" type="file" accept="application/json" />
          </label>
          <label class="btn btn--file" for="file-import-json-merge">
            Importar JSON (complementar)
            <input id="file-import-json-merge" type="file" accept="application/json" />
          </label>
          <button id="btn-clear-current" class="btn btn--danger" type="button">Limpar dados (equipamento atual)</button>
        </div>

        <div class="status">
          <span class="status__label">Status:</span>
          <span id="save-status" class="status__value">—</span>
        </div>
      </div>
    </header>

    <main class="app-main">
      <section id="panel-osa" class="panel" role="tabpanel" aria-labelledby="tab-osa">
        <div class="table-wrap">
          <table class="data-table" aria-label="Tabela OSA Visível">
            <thead>
              <tr>
                <th class="sticky-col" rowspan="2">Duty Cycle (%)</th>
                <th class="th--green" colspan="2">Verde</th>
                <th class="th--red" colspan="2">Vermelho</th>
                <th class="th--blue" colspan="2">Azul</th>
              </tr>
              <tr>
                <th class="th--green">λ pico (nm)</th>
                <th class="th--green">Intensidade</th>
                <th class="th--red">λ pico (nm)</th>
                <th class="th--red">Intensidade</th>
                <th class="th--blue">λ pico (nm)</th>
                <th class="th--blue">Intensidade</th>
              </tr>
            </thead>
            <tbody id="tbody-osa"></tbody>
          </table>
        </div>
      </section>

      <section id="panel-thorlabs" class="panel panel--hidden" role="tabpanel" aria-labelledby="tab-thorlabs">
        <div class="table-wrap">
          <table class="data-table" aria-label="Tabela ThorLabs">
            <thead>
              <tr>
                <th class="sticky-col" rowspan="2">Duty Cycle (%)</th>
                <th class="th--green" colspan="2">Verde</th>
                <th class="th--red" colspan="2">Vermelho</th>
                <th class="th--blue" colspan="2">Azul</th>
              </tr>
              <tr>
                <th class="th--green">λ pico (nm)</th>
                <th class="th--green">Intensidade</th>
                <th class="th--red">λ pico (nm)</th>
                <th class="th--red">Intensidade</th>
                <th class="th--blue">λ pico (nm)</th>
                <th class="th--blue">Intensidade</th>
              </tr>
            </thead>
            <tbody id="tbody-thorlabs"></tbody>
          </table>
        </div>
      </section>
    </main>

    <footer class="app-footer">
      <div class="app-footer__hint">
        Dados salvos automaticamente no navegador. Exporte CSV/JSON para backup.
      </div>
    </footer>

    <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true"></div>

    <div id="confirm-overlay" class="confirm-overlay" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="confirm-title">
      <div class="confirm-box">
        <p id="confirm-title" class="confirm-message"></p>
        <div class="confirm-actions">
          <button type="button" id="confirm-cancel" class="btn">Cancelar</button>
          <button type="button" id="confirm-ok" class="btn btn--danger">Apagar</button>
        </div>
      </div>
    </div>

    <script src="./app.js"></script>
  </body>
</html>
